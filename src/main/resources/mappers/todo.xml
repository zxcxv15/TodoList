<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.springboot.TodoList.domin.todo.TodoRepository">
	<insert id="save" parameterType="com.springboot.TodoList.domin.todo.Todo" >
		insert into
			todo_mst
		values(
			  0,
  			#{todo_content},
  			0,
  			#{importance_flag},
  			now(),
  			now()
		)
	</insert>
	<select id="getTodoList" parameterType="hashmap" resultType="com.springboot.TodoList.domin.todo.Todo">
		select
			tm.todo_code,
			tm.todo_content,
			tm.todo_complete,
			
			tt.total_count,
			
			tm.importance_flag,
			tm.create_date,
			tm.update_date
			
		from
			todo_mst tm
			left outer join(select
									count(*) as total_count
								from
									todo_mst) tt on(1 = 1)
		order by 
			todo_code desc
		limit #{index},#{count}
	</select>
	
		<select id="getImportanceTodoListOfIndex" parameterType="hashmap" resultType="com.springboot.TodoList.domin.todo.Todo">
		select
			*
		from
			todo_mst tm
			left outer join(select
									count(*) as total_count
								from
									todo_mst) tt on(1 = 1)
		where
			importance_flag = 1
		order by 
			todo_code desc
		limit #{index},#{count}
	</select>
  </mapper>